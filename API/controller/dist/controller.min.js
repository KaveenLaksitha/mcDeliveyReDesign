"use strict";var router=require("express").Router(),Cart=require("../model/cart"),Register=require("../model/register"),moment=require("moment");router.post("/addToCart",function(r,t){var n,a,s,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("data for cart",r.body),n=r.body.name,a=r.body.num,s=r.body.calculatedPrice,o=new Cart({name:n,quantity:a,price:s}),e.prev=5,e.next=8,regeneratorRuntime.awrap(o.save());case 8:if(e.sent)return e.abrupt("return",t.status(201).send({status:!0,message:"item added for cart"}));e.next=13;break;case 13:return e.abrupt("return",t.status(500).send({status:"failed to add item record"}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log("error",e.t0);case 19:case"end":return e.stop()}},null,null,[[5,16]])}),router.get("/cart",function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Cart.find());case 3:return t=e.sent,e.abrupt("return",r.status(200).send({status:"Success",data:t}));case 7:return e.prev=7,e.t0=e.catch(0),console.log("Something went wrong while connecting to DB"),e.abrupt("return",{ok:!1});case 11:case"end":return e.stop()}},null,null,[[0,7]])}),router.post("/addRegister",function(r,t){var n,a,s,o,u,c,i,d;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("data for register",r.body),n=r.body.salutation,a=r.body.name,s=Number(r.body.contactno),o=moment(r.body.dateofbirth).format("YYYY-MMMM-DD"),u=r.body.email,c=r.body.password,i=r.body.confirmpassword,d=new Register({salutation:n,name:a,contactno:s,dateofbirth:o,email:u,password:c,confirmpassword:i}),e.prev=9,e.next=12,regeneratorRuntime.awrap(d.save());case 12:if(e.sent)return e.abrupt("return",t.status(201).send({status:!0,message:"Register to the system successfully"}));e.next=17;break;case 17:return e.abrupt("return",t.status(500).send({status:"Try again"}));case 18:e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(9),console.log("error",e.t0),e.abrupt("return",t.status(500).send({status:"User Already Register to MC Delivery App"}));case 24:case"end":return e.stop()}},null,null,[[9,20]])}),router.get("/getRegister",function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Register.find());case 3:return t=e.sent,e.abrupt("return",r.status(200).send({status:"Success",data:t}));case 7:return e.prev=7,e.t0=e.catch(0),console.log("Something went wrong while connecting to DB"),e.abrupt("return",{ok:!1});case 11:case"end":return e.stop()}},null,null,[[0,7]])}),router.get("/get/:email/:pass",function(r,t){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.params.email,a=r.params.pass,e.next=4,regeneratorRuntime.awrap(Register.findOne({email:n,password:a}).then(function(e){console.log("dataaaaaaa",e),t.status(200).send({status:"User fetched",register:e})}).catch(function(){console.log(err.message),t.status(500).send({status:"Error with get user",error:err.message})}));case 4:e.sent;case 5:case"end":return e.stop()}})}),module.exports=router;
//# sourceMappingURL=controller.min.js.map
