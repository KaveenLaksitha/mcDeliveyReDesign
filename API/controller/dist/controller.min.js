"use strict";var router=require("express").Router(),FeedBack=require("../model/feedback"),Address=require("../model/address"),Card=require("../model/card"),Cart=require("../model/cart"),FoodFav=require("../model/foodFav"),Register=require("../model/register"),moment=require("moment");router.post("/addToCart",function(r,t){var n,a,s,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("data for cart",r.body),n=r.body.name,a=r.body.num,s=r.body.calculatedPrice,o=new Cart({name:n,quantity:a,price:s}),e.prev=5,e.next=8,regeneratorRuntime.awrap(o.save());case 8:if(e.sent)return e.abrupt("return",t.status(201).send({status:!0,message:"item added for cart"}));e.next=13;break;case 13:return e.abrupt("return",t.status(500).send({status:"failed to add item record"}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log("error",e.t0);case 19:case"end":return e.stop()}},null,null,[[5,16]])}),router.get("/cart",function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Cart.find());case 3:return t=e.sent,e.abrupt("return",r.status(200).send({status:"Success",data:t}));case 7:return e.prev=7,e.t0=e.catch(0),console.log("Something went wrong while connecting to DB"),e.abrupt("return",{ok:!1});case 11:case"end":return e.stop()}},null,null,[[0,7]])}),router.post("/addAReview",function(r,t){var n,a,s,o,u,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("data for feedback",r.body),n=r.body.orderId,a=r.body.reviewOn,s=r.body.suggestion,o=r.body.complaint,u=Number(r.body.rate),c=new FeedBack({orderId:n,reviewOn:a,suggestion:s,complaint:o,rate:u}),e.prev=7,e.next=10,regeneratorRuntime.awrap(c.save());case 10:if(e.sent)return e.abrupt("return",t.status(201).send({status:"New FeedBack Saved"}));e.next=15;break;case 15:return e.abrupt("return",t.status(500).send({status:"FeedBack could not be saved"}));case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(7),console.log("error",e.t0),e.abrupt("return",t.status(500).send({status:"FeedBack could not be saved"}));case 22:case"end":return e.stop()}},null,null,[[7,18]])}),router.get("/getReview",function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(FeedBack.find());case 3:return t=e.sent,e.abrupt("return",r.status(200).send({status:"Success",data:t}));case 7:return e.prev=7,e.t0=e.catch(0),console.log("Something went wrong while connecting to DB"),e.abrupt("return",{ok:!1});case 11:case"end":return e.stop()}},null,null,[[0,7]])}),router.post("/addAddress",function(r,t){var n,a,s,o,u,c,d,i,l,p,g;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("data for address",r.body),n=r.body.userId,a=r.body.deliveryAddress,s=r.body.city,o=r.body.locationType,u=r.body.floor,c=r.body.apartmentNo,d=r.body.landMark,i=r.body.companyName,l=r.body.department,p=r.body.instruct,g=new Address({userId:n,deliveryAddress:a,city:s,locationType:o,floor:u,apartmentNo:c,landMark:d,companyName:i,department:l,instruct:p}),e.prev=12,e.next=15,regeneratorRuntime.awrap(g.save());case 15:if(e.sent)return e.abrupt("return",t.status(201).send({status:"New Delivery Address Successfully Saved"}));e.next=20;break;case 20:return e.abrupt("return",t.status(500).send({status:"Delivery Address could not be saved"}));case 21:e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(12),console.log("error",e.t0),e.abrupt("return",t.status(500).send({status:"Delivery Address could not be saved"}));case 27:case"end":return e.stop()}},null,null,[[12,23]])}),router.get("/getAddress",function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Address.find());case 3:return t=e.sent,e.abrupt("return",r.status(200).send({status:"Success",data:t}));case 7:return e.prev=7,e.t0=e.catch(0),console.log("Something went wrong while connecting to DB"),e.abrupt("return",{ok:!1});case 11:case"end":return e.stop()}},null,null,[[0,7]])}),router.post("/addACard",function(r,t){var n,a,s,o,u,c,d;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("data for card",r.body),n=r.body.userId,a=r.body.cardType,s=r.body.cardNumber,o=r.body.nameOnCard,u=r.body.ExpiryDate,c=r.body.uri,d=new Card({userId:n,cardType:a,cardNumber:s,nameOnCard:o,expiryDate:u,uri:c}),e.prev=8,e.next=11,regeneratorRuntime.awrap(d.save());case 11:if(e.sent)return e.abrupt("return",t.status(201).send({status:"New Card Saved"}));e.next=16;break;case 16:return e.abrupt("return",t.status(500).send({status:"Card could not be saved"}));case 17:e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(8),console.log("error",e.t0),e.abrupt("return",t.status(500).send({status:"Card could not be saved"}));case 23:case"end":return e.stop()}},null,null,[[8,19]])}),router.get("/getCards",function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Card.find());case 3:return t=e.sent,e.abrupt("return",r.status(200).send({status:"Success",data:t}));case 7:return e.prev=7,e.t0=e.catch(0),console.log("Something went wrong while connecting to DB"),e.abrupt("return",{ok:!1});case 11:case"end":return e.stop()}},null,null,[[0,7]])}),router.route("/removeCard/:uID").delete(function(r,t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.params.uID,e.next=3,regeneratorRuntime.awrap(Card.findOneAndDelete({userId:n}).then(function(){t.status(200).send({status:"Card deleted"})}).catch(function(){console.log(err),t.status(500).send({status:"Error with deleting a card",error:err.message})}));case 3:case"end":return e.stop()}})}),router.post("/addToFav",function(r,t){var n,a,s,o,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("data for Favourite",r.body),n=r.body.name,a=r.body.num,s=r.body.price,o=r.body.image,u=new FoodFav({name:n,quantity:a,price:s,image:o}),e.prev=6,e.next=9,regeneratorRuntime.awrap(u.save());case 9:if(e.sent)return e.abrupt("return",t.status(201).send({status:"item added for fAVOURITE"}));e.next=14;break;case 14:return e.abrupt("return",t.status(500).send({status:"failed to add item record"}));case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),console.log("error",e.t0);case 20:case"end":return e.stop()}},null,null,[[6,17]])}),router.get("/FavList",function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(FoodFav.find());case 3:return t=e.sent,e.abrupt("return",r.status(200).send({status:"Success",data:t}));case 7:return e.prev=7,e.t0=e.catch(0),console.log("Something went wrong while connecting to DB"),e.abrupt("return",{ok:!1});case 11:case"end":return e.stop()}},null,null,[[0,7]])}),router.post("/addRegister",function(r,t){var n,a,s,o,u,c,d,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("data for register",r.body),n=r.body.salutation,a=r.body.name,s=Number(r.body.contactno),o=moment(r.body.dateofbirth).format("YYYY-MMMM-DD"),u=r.body.email,c=r.body.password,d=r.body.confirmpassword,i=new Register({salutation:n,name:a,contactno:s,dateofbirth:o,email:u,password:c,confirmpassword:d}),e.prev=9,e.next=12,regeneratorRuntime.awrap(i.save());case 12:if(e.sent)return e.abrupt("return",t.status(201).send({status:!0,message:"Register to the system successfully"}));e.next=17;break;case 17:return e.abrupt("return",t.status(500).send({status:"Try again"}));case 18:e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(9),console.log("error",e.t0),e.abrupt("return",t.status(500).send({status:"User Already Register to MC Delivery App"}));case 24:case"end":return e.stop()}},null,null,[[9,20]])}),router.get("/getRegister",function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Register.find());case 3:return t=e.sent,e.abrupt("return",r.status(200).send({status:"Success",data:t}));case 7:return e.prev=7,e.t0=e.catch(0),console.log("Something went wrong while connecting to DB"),e.abrupt("return",{ok:!1});case 11:case"end":return e.stop()}},null,null,[[0,7]])}),router.get("/get/:email/:pass",function(r,t){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.params.email,a=r.params.pass,e.next=4,regeneratorRuntime.awrap(Register.findOne({email:n,password:a}).then(function(e){console.log("dataaaaaaa",e),t.status(200).send({status:"User fetched",register:e})}).catch(function(){console.log(err.message),t.status(500).send({status:"Error with get user",error:err.message})}));case 4:e.sent;case 5:case"end":return e.stop()}})}),module.exports=router;
//# sourceMappingURL=controller.min.js.map
